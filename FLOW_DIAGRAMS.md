# Game Flow Diagrams

## Current Flow (Broken)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     CURRENT FLOW                            â”‚
â”‚                     (Has Issues)                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Player 1                    Server                    Player 2
   â”‚                          â”‚                          â”‚
   â”œâ”€ REGISTER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                          â”‚
   â”‚<â”€â”€â”€â”€ Player ID â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                          â”‚
   â”‚                          â”‚<â”€â”€â”€â”€â”€â”€ REGISTER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚                          â”œâ”€â”€â”€â”€ Player ID â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
   â”‚                          â”‚                          â”‚
   â”œâ”€ CREATE_LOBBY â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                          â”‚
   â”‚<â”€â”€â”€â”€ Lobby ID â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                          â”‚
   â”‚                          â”‚                          â”‚
   â”œâ”€ JOIN_LOBBY â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                          â”‚
   â”‚                          â”‚<â”€â”€â”€â”€â”€â”€ JOIN_LOBBY â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚                          â”‚                          â”‚
   â”œâ”€ START_GAME â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                          â”‚
   â”‚                          â”‚                          â”‚
   â”‚<â”€â”€â”€â”€ Game Started â”€â”€â”€â”€â”€â”€â”€â”¤                          â”‚
   â”‚   (PRE_FLOP state)       â”‚                          â”‚
   â”‚   ğŸ”´ No betting round!   â”‚                          â”‚
   â”‚                          â”‚                          â”‚
   â”œâ”€ DEAL_FLOP â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚  ğŸ”´ Should require       â”‚
   â”‚<â”€â”€â”€â”€ 3 Cards â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     betting first!       â”‚
   â”‚                          â”‚                          â”‚
   â”œâ”€ DEAL_TURN â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚  ğŸ”´ No betting again!    â”‚
   â”‚<â”€â”€â”€â”€ 4th Card â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                          â”‚
   â”‚                          â”‚                          â”‚
   â”œâ”€ DEAL_RIVER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚  ğŸ”´ No betting again!    â”‚
   â”‚<â”€â”€â”€â”€ 5th Card â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                          â”‚
   â”‚   ğŸ”´ DUPLICATE CARDS!    â”‚                          â”‚
   â”‚                          â”‚                          â”‚
   â”œâ”€ DETERMINE_WINNER â”€â”€â”€â”€â”€â”€>â”‚                          â”‚
   â”‚<â”€â”€â”€â”€ Winner â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                          â”‚
   â”‚                          â”‚                          â”‚
   â”‚  ğŸ”´ Player 2 sees        â”‚  ğŸ”´ No notifications     â”‚
   â”‚     nothing!             â”‚     to other players!    â”‚
   â”‚                          â”‚                          â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ”´ PROBLEMS:
1. Player 2 doesn't see any game updates
2. No betting rounds enforced
3. Duplicate cards dealt
4. Anyone can control the game
5. Players can't see their own cards
```

## Desired Flow (Fixed)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     DESIRED FLOW                            â”‚
â”‚                   (With All Fixes)                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Player 1 (Admin)            Server                    Player 2
   â”‚                          â”‚                          â”‚
   â”œâ”€ REGISTER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                          â”‚
   â”‚<â”€â”€â”€â”€ Player ID â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                          â”‚
   â”‚                          â”‚<â”€â”€â”€â”€â”€â”€ REGISTER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚                          â”œâ”€â”€â”€â”€ Player ID â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
   â”‚                          â”‚                          â”‚
   â”œâ”€ CREATE_LOBBY â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                          â”‚
   â”‚   (with admin ID)        â”‚                          â”‚
   â”‚<â”€â”€â”€â”€ Lobby Created â”€â”€â”€â”€â”€â”€â”¤                          â”‚
   â”‚   âœ… You are admin       â”‚                          â”‚
   â”‚                          â”‚                          â”‚
   â”‚                          â”‚<â”€â”€â”€â”€â”€â”€ JOIN_LOBBY â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚<â”€â”€â”€â”€ ğŸ‘ï¸ P2 joined â”€â”€â”€â”€â”€â”€â”€â”¤â”€â”€â”€â”€â”€ ğŸ‘ï¸ You joined â”€â”€â”€â”€>â”‚
   â”‚                          â”‚                          â”‚
   â”œâ”€ START_GAME â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚  âœ… Only admin can       â”‚
   â”‚                          â”‚     start!               â”‚
   â”‚<â”€â”€â”€â”€ Game Started â”€â”€â”€â”€â”€â”€â”€â”¤                          â”‚
   â”‚   State: PRE_FLOP        â”œâ”€â”€â”€â”€â”€ Game Started â”€â”€â”€â”€â”€>â”‚
   â”‚   Your cards: Aâ™  Kâ™       â”‚   State: PRE_FLOP        â”‚
   â”‚   Pot: 30 (blinds)       â”‚   Your cards: Qâ™¥ Qâ™¦      â”‚
   â”‚   Your turn              â”‚   Pot: 30 (blinds)       â”‚
   â”‚                          â”‚                          â”‚
   â”œâ”€ GET_MY_CARDS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                          â”‚
   â”‚<â”€â”€â”€â”€ Aâ™  Kâ™  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                          â”‚
   â”‚                          â”‚                          â”‚
   â”œâ”€ RAISE 100 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚  âœ… Turn-based           â”‚
   â”‚<â”€â”€â”€â”€ Action OK â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”€â”€â”€â”€â”€ ğŸ‘ï¸ P1 raised â”€â”€â”€â”€>â”‚
   â”‚                          â”‚   Pot: 130               â”‚
   â”‚                          â”‚   Your turn              â”‚
   â”‚                          â”‚                          â”‚
   â”‚                          â”‚<â”€â”€â”€â”€â”€â”€ CALL 100 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚<â”€â”€â”€â”€ ğŸ‘ï¸ P2 called â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”€â”€â”€â”€â”€ Action OK â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
   â”‚   Pot: 230               â”‚   Pot: 230               â”‚
   â”‚                          â”‚                          â”‚
   â”‚  âœ… Betting complete     â”‚  âœ… Auto-deal flop       â”‚
   â”‚<â”€â”€â”€â”€ FLOP: 9â™£ 9â™¦ 5â™¥ â”€â”€â”€â”€â”€â”¤â”€â”€â”€â”€â”€ FLOP: 9â™£ 9â™¦ 5â™¥ â”€â”€â”€>â”‚
   â”‚   Your turn              â”‚   Pot: 230               â”‚
   â”‚                          â”‚                          â”‚
   â”œâ”€ CHECK â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                          â”‚
   â”‚<â”€â”€â”€â”€ Action OK â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”€â”€â”€â”€â”€ ğŸ‘ï¸ P1 checked â”€â”€â”€>â”‚
   â”‚                          â”‚   Your turn              â”‚
   â”‚                          â”‚                          â”‚
   â”‚                          â”‚<â”€â”€â”€â”€â”€â”€ CHECK â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚<â”€â”€â”€â”€ ğŸ‘ï¸ P2 checked â”€â”€â”€â”€â”€â”€â”€â”¤â”€â”€â”€â”€â”€ Action OK â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
   â”‚                          â”‚                          â”‚
   â”‚  âœ… Betting complete     â”‚  âœ… Auto-deal turn       â”‚
   â”‚<â”€â”€â”€â”€ TURN: 9â™£ 9â™¦ 5â™¥ Aâ™£ â”€â”€â”¤â”€â”€â”€â”€â”€ TURN: 9â™£ 9â™¦ 5â™¥ Aâ™£ >â”‚
   â”‚   Your turn              â”‚                          â”‚
   â”‚                          â”‚                          â”‚
   â”œâ”€ ALL_IN â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                          â”‚
   â”‚<â”€â”€â”€â”€ Action OK â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”€â”€â”€â”€â”€ ğŸ‘ï¸ P1 all-in â”€â”€â”€â”€>â”‚
   â”‚   Pot: 1230              â”‚   Pot: 1230              â”‚
   â”‚                          â”‚   Your turn              â”‚
   â”‚                          â”‚                          â”‚
   â”‚                          â”‚<â”€â”€â”€â”€â”€â”€ FOLD â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚<â”€â”€â”€â”€ ğŸ‘ï¸ P2 folded â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”€â”€â”€â”€â”€ Action OK â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
   â”‚                          â”‚                          â”‚
   â”‚<â”€â”€â”€â”€ ğŸ† You win! â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”€â”€â”€â”€â”€ ğŸ˜¢ You lost â”€â”€â”€â”€â”€â”€>â”‚
   â”‚   Pot won: 1230          â”‚   P1 wins: 1230          â”‚
   â”‚   Total chips: 2230      â”‚   Total chips: 0         â”‚
   â”‚                          â”‚                          â”‚
   â”‚<â”€â”€â”€â”€ Ready for next? â”€â”€â”€â”€â”¤â”€â”€â”€â”€â”€ Ready for next? â”€â”€>â”‚
   â”‚                          â”‚                          â”‚
   â”œâ”€ READY_NEXT_HAND â”€â”€â”€â”€â”€â”€â”€>â”‚                          â”‚
   â”‚                          â”‚<â”€â”€â”€â”€ LEAVE_GAME â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚<â”€â”€â”€â”€ Waiting for players â”¤â”€â”€â”€â”€â”€ Left game â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
   â”‚                          â”‚                          â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

âœ… IMPROVEMENTS:
1. Both players see all game updates in real-time
2. Betting rounds enforced before dealing
3. No duplicate cards (unique deck)
4. Admin controls game start
5. Players can see their cards anytime
6. Turn-based actions enforced
7. Game flow is clear and automatic
```

## Game State Transitions

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   GAME STATE MACHINE                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ WAITING  â”‚ â† Game created
         â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
              â”‚ START_GAME (shuffle, deal, blinds)
              â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”Œâ”€â”€â”€â”‚ PRE_FLOP â”‚
    â”‚   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
    â”‚        â”‚ All players acted? â”€â”€NOâ”€â”€â”
    â”‚        â”‚ All bets equal?           â”‚
    â”‚       YES                          â”‚
    â”‚        â–¼                           â”‚
    â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
    â”‚   â”‚  FLOP   â”‚ â† Deal 3 cards      â”‚
    â”‚   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                     â”‚
    â”‚        â”‚ All players acted? â”€â”€NOâ”€â”€â”¤
    â”‚        â”‚ All bets equal?           â”‚
    â”‚       YES                          â”‚
    â”‚        â–¼                           â”‚
    â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
    â”‚   â”‚  TURN   â”‚ â† Deal 4th card     â”‚
    â”‚   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                     â”‚
    â”‚        â”‚ All players acted? â”€â”€NOâ”€â”€â”¤
    â”‚        â”‚ All bets equal?           â”‚
    â”‚       YES                          â”‚
    â”‚        â–¼                           â”‚
    â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
    â”‚   â”‚  RIVER  â”‚ â† Deal 5th card     â”‚
    â”‚   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                     â”‚
    â”‚        â”‚ All players acted? â”€â”€NOâ”€â”€â”¤
    â”‚        â”‚ All bets equal?           â”‚
    â”‚       YES                          â”‚
    â”‚        â–¼                           â”‚
    â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
    â”‚   â”‚ SHOWDOWN â”‚ â† Evaluate hands   â”‚
    â”‚   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                    â”‚
    â”‚        â”‚ Determine winner          â”‚
    â”‚        â–¼                           â”‚
    â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
    â”‚   â”‚ FINISHED â”‚                    â”‚
    â”‚   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                    â”‚
    â”‚        â”‚ Ready for next?           â”‚
    â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
    â”‚                              â”‚    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”˜
                                   â”‚
                                   â–¼
                            [Back to WAITING]
                              or [End Game]

âš ï¸  At any betting phase:
    - If only 1 active player â†’ Skip to SHOWDOWN
    - If player goes ALL_IN â†’ Continue but mark as all-in
    - If illegal action â†’ Reject and maintain state
```

## Turn Order Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    TURN MANAGEMENT                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Example: 3 players (Alice=Dealer, Bob=SB, Charlie=BB)

PRE-FLOP:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  Charlie (BB) â”€1â†’ Alice â”€2â†’ Bob â”€3â†’ â”‚ â† One full round
  â”‚        â†‘                      â”‚     â”‚
  â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  
  First to act: Charlie (left of BB)
  Last to act: Bob (BB has option)

POST-FLOP, TURN, RIVER:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  Bob (SB) â”€1â†’ Charlie â”€2â†’ Alice â”€3â†’ â”‚
  â”‚      â†‘                       â”‚      â”‚
  â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  
  First to act: Bob (left of dealer)
  Last to act: Alice (dealer)

DEALER BUTTON ROTATION (next hand):
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  Alice â†’ Bob â†’ Charlie â†’ â”‚
  â”‚    â†‘                 â”‚   â”‚
  â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  
  New dealer: Bob
  New SB: Charlie  
  New BB: Alice

âœ… Rules enforced:
  - Only current player can act
  - Turn advances after action
  - Skip folded players
  - Dealer rotates clockwise
```

## Betting Round Completion

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              BETTING ROUND LOGIC                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Round Complete When:
  âœ“ All active players have acted at least once
  âœ“ All active players' bets are equal
  âœ“ OR only one active player remains

Example Scenario:

Initial State:
  Alice: $1000, bet: $0
  Bob:   $1000, bet: $10 (SB)
  Charlie: $1000, bet: $20 (BB)
  Current bet: $20

Action Sequence:
  1. Alice RAISE $50      â†’ bet=$50, current_bet=$50
     âŒ Round incomplete (Bob & Charlie haven't acted)
  
  2. Bob CALL $50         â†’ bet=$50
     âŒ Round incomplete (Charlie hasn't acted)
  
  3. Charlie CALL $50     â†’ bet=$50
     âœ… Round complete! (All acted, all bets equal)

Another Scenario:
  1. Alice FOLD           â†’ folded
     âŒ Round incomplete (others haven't acted)
  
  2. Bob RAISE $100       â†’ bet=$100
     âŒ Round incomplete (Charlie hasn't acted)
  
  3. Charlie FOLD         â†’ folded
     âœ… Round complete! (Only Bob active)
     â†’ Skip to SHOWDOWN

Edge Case (All-In):
  1. Alice ALL_IN $1000   â†’ bet=$1000, all-in
  2. Bob FOLD             â†’ folded
  3. Charlie CALL $1000   â†’ bet=$1000
     âœ… Round complete!
     â†’ Auto-deal remaining cards
```

## Lobby to Game Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                LOBBY â†’ GAME FLOW                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Step 1: Create Lobby
  Admin: CREATE_LOBBY "High Stakes" 6 <admin-id>
  Result: Lobby created, admin auto-joined
  
Step 2: Players Join
  P2: JOIN_LOBBY <lobby-id> <p2-id>
  P3: JOIN_LOBBY <lobby-id> <p3-id>
  Result: 3/6 players in lobby
  
Step 3: Start Game (Admin Only)
  Admin: START_GAME_FROM_LOBBY <lobby-id>
  âœ… Validates: 
     - Caller is admin
     - At least 2 players
     - Lobby not already started
  Result: Game created with lobby players
  
Step 4: Play Game
  [Full game flow as shown above]
  
Step 5: Game Ends
  Result: Winner determined
  Option A: READY_NEXT_HAND â†’ New hand in same lobby
  Option B: LEAVE_GAME â†’ Return to lobby selection
  
Step 6: Next Hand (if A)
  - Dealer button rotates
  - New deck shuffled
  - Cards dealt
  - Blinds posted
  - Game continues
```

## Notification Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 EVENT NOTIFICATIONS                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

When Player 1 does: RAISE $100

Server broadcasts to all players in game:

  Player 1:
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ âœ“ ACTION: You raised $100   â”‚
    â”‚   Pot: $230                  â”‚
    â”‚   Your chips: $900           â”‚
    â”‚   Waiting for others...      â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  Player 2:
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ ğŸ‘ï¸ P1 raised $100            â”‚
    â”‚   Pot: $230                  â”‚
    â”‚   Current bet: $100          â”‚
    â”‚   ğŸ¯ YOUR TURN               â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  Player 3 (Spectator):
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ ğŸ‘ï¸ P1 raised $100            â”‚
    â”‚   Pot: $230                  â”‚
    â”‚   Waiting for P2...          â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Events broadcasted:
  - PlayerActed (FOLD/CHECK/CALL/RAISE/ALL_IN)
  - CardsDealt (FLOP/TURN/RIVER)
  - PotUpdated
  - TurnChanged
  - PhaseChanged
  - WinnerDetermined
  - PlayerJoined/Left
```

---

**Legend:**
- âœ… = Works correctly / Fixed
- ğŸ”´ = Broken / Issue
- âŒ = Invalid / Incomplete
- ğŸ‘ï¸ = Notification/Broadcast
- ğŸ¯ = Player's turn
- ğŸ† = Winner
- ğŸ˜¢ = Loser
